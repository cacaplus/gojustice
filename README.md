# GoJustice 影片時間戳記燒錄器

**GoJustice Video Timestamp Burner**

台灣的交通環境，從道路品質、道路規劃到用路人水準都是個悲劇。許多車友會使用行車紀錄器自保，但有些機種，如 GoPro，無法在錄製時就加上時間戳記，造成檢舉時的巨大問題。因此我寫了這個小工具，讓正義夥伴們能夠快速方便地加上時間戳記。

如果您喜歡這個程式，歡迎分享；  
若您的影片使用本程式產生，也歡迎在影片貼文加上 `#gogojustice`。

* 版　本：0.91
* 首　頁：[GitHub](https://github.com/cacaplus/gojustice)
* 下載頁：[GitHub Release Page](https://github.com/cacaplus/gojustice/releases)

![輸出範例](https://caca.plus/project/gojustice/timestamp_sample.jpg)
上圖為輸出範例截圖，日期與時間皆為測試用，非實際發生時間。  
您也可以至 [YouTube](https://www.youtube.com/watch?v=PvK3Wrv6bQc) 瀏覽動態範本。


## 功能

* 將影片加上時間戳記。
* 利用檔名就可以剪裁或縮小影片。


**系統需求**

* Windows 7 32/64bit
* NVidia GPU、AMD GPU、Intel 較新的 CPU 可開啟硬體加速

**功能限制**

* 目前僅支援 PC。
* 目前沒有圖形介面。
* 目前不支援一鍵檢舉，以後也不會有。
* 可能會有 Bug，請多擔待。


## 安裝與設定

### A. 半懶人包安裝法

1. **下載 GoJustice 執行檔**  
   前往 [Release](https://github.com/cacaplus/gojustice/releases) 下載最新版 `GoJustice` ，解壓縮到一個資料夾，如 `C:\GoJustice`。

2. **開始使用**


### B. 全自己來安裝

1. **安裝 Python** (Python 3.8)  
   請官方網站下載安裝包，安裝時請勾選 `Add Python 3.8 to PATH`

2. **下載 GoJustice 原始檔**  

3. **下載 ffmpeg**  
   前往 [官方網站](https://ffmpeg.org/) 下載；  
   Windows 版下載網址為 https://ffmpeg.zeranoe.com/builds/  
   將下載的 `ffmpeg` 壓縮檔 `bin` 資料夾中的所有檔案，解壓縮至 `GoJustice` 中的 `bin` 資料夾。


## 情境式使用說明

以下提供 3 種常用的情境說明用法：

### A. 使用 GoPro 搭配 GoPro App，已抓出所需短片段，需加上時間戳記

1. 抓出的影片複製至 `input` 資料夾，**檔名前面的日期數字不要改**。
   
2. 點兩下，執行 `GoJustice.exe`，進行轉檔作業。
   
3. 產生的影片檔將出現在 `output` 資料夾。


       GoPro 使用的是 UTC+0 時間，所以你會看到檔名比實際時間少了 8 小時。
       別擔心，程式會自動偵測是否為 GoPro 所拍攝，處理這個小問題。


### B. 直接從記憶卡取出檔案，已修剪完，需加上時間戳記

1. 將修剪後的影片複製至 `input` 資料夾。

2. 將檔名前端加上 **時間參數**，並視情況加上其他參數。
   
3. 點兩下，執行 `GoJustice.exe`，進行轉檔作業。

4. 產生的影片檔將出現在 `output` 資料夾。

### C. 直接從記憶卡取出檔案，需要修剪影片並加上時間戳記

1. 將修剪後的影片複製至 `input` 資料夾。

2. 將檔名前端加上 **時間參數**，並加上 **剪裁參數**。
   
3. 點兩下，執行 `GoJustice.exe`，進行轉檔作業。

4. 產生的影片檔將出現在 `output` 資料夾。


## 轉檔參數說明

1. **日期與參數**  
   檔名最前為日期，日期可接受多種格式：

       20200701_001245000.mp4  # GoPro 專用格式，時間會自動修正為 UTC+8
       20200701_081245.mp4
       20200701-081245.mp4     # 中間以底線或減號都可以
       0701_081245.mp4
       0701-081245.mp4         # 今年的影片可以不用寫年，但需自行注意跨年度的問題


   位於檔名尾端，以 `_@` 開始，每個參數以 `,`（逗點）分隔，如：
   
       20200701_081245_TP_AAA-0001_@A,C0135L510.mp4 
   
   意思為：  
   * 影片開始時間為今年的 7月1日，早上8點12分45秒；
   * `A`：保留影片聲音；
   * `C:0135,510`：從影片 `1:35` 處剪 `5.10` 秒出來；
   * 中間可以加上車牌等資訊。

   點選輸出後，會在 `output` 資料夾看到以下檔案：

       20200701_081245_TP_AAA-0001.ts.mp4

   參數的部分會移除，並會在檔名加上 `.ts` 作為辨識用途。

2. **修剪**  
   提供兩種修剪方式如下：

   如要剪出從 `01:35` 開始的 `5.1` 秒，參數格式為 `C0135L051`，如：  
   
       20200701_081245_TP_AAA-0001_@C0135L510.mp4

   如要剪出從 `01:35` 到 `01:45` 秒，參數格式為 `C0135-0145`，如：  

       20200701_081245_TP_AAA-0001_@C0135-0145.mp4

3. **聲音**  
   預設狀態下會移除聲音，若需要保留聲音，參數為 `A`，如：  
   
       20200701_081245_TP_AAA-0001_@A.mp4


### 參數速查表

|參數|預設|功能
|--|--|--
|`A`              |不使用|輸出時包含聲音，預設不使用。
|`C[MMSS]L[S]`    |不使用|裁切，由影片時間 `[MMSS]` 開始，長度為 `[S]`；`S` 為`3-5`位數字，單位為 0.01 秒
|`C[MMSS]-[mmss]` |不使用|裁切，由影片時間 `[MMSS]` 開始至 `[mmss]` 結束。
|`B[N][KM]`       |不使用|手動影片品質，如 `B8000K` 即為 `8000Kbps`；`B8M` 即為 `8Mbps`
|`S[N]M`          |`S30M`|手動設定目標影片大小，如 `S30M` 即為目標檔案大小 `30MB`。<br>預設值為最小氣的台北市標準（30MB）。

**以下為預定更新的功能**

|參數|預設|功能
|--|--|--
|`R[N]`           |-|手動設定影片大小，如 `R1920` 為輸出時縮放至寬 `1920`。
|`F[N]`           |-|手動設定影片FPS，如 `F30` 為輸出時將 FPS 調整為 `30`。


## 注意事項

1. 轉檔過程需要用到大量運算資源，請避免執行重要的運算工作。
   
2. 轉檔過程會產生暫存檔，轉完會自己刪掉。
   
3. 指定容量不會太精確，系統會自動打 95 折。


## 建議的錄影設定

1. 晴天使用最高 `2.5K 60p` 即可，騎不快的話，用 `30p` 就好了。越高的 `FPS` 需要越高的位元率，同品質的畫面畫質就需要越高的儲存空間。

2. 傍晚時間的檢舉需要技巧，不然調多少都沒用。


## 之後有時間會繼續做的

1. 更細的設定檔

2. 浮水印

3. 更好的轉檔品質

4. 提供其他平台的版本

5. 使用暴力法覆蓋錯誤的時間


## 注意事項

* 因為我沒有 GoPro，如果你在使用時遇到問題，請把出問題的順序跟檔案一起給我。
* 因為我沒有 Mac，所以目前沒辦法直接提供 Mac 上的狀態，但程式理論上小修改是可以執行的。


## 授權方式

* 本程式 **永遠免費**，且不會以任何方式向使用者收費。

* 為確保資訊安全，所有分享請連結回首頁下載。

* 本程式不開放改作，開放原始碼僅是證明不含惡意程式。